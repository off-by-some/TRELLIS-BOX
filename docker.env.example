# =============================================================================
# Trellis 3D Docker Configuration
# =============================================================================
# Copy this file to .env and modify as needed
# Usage: cp docker.env.example .env
#
# These variables are used by docker-compose.yml and can also be used
# when building directly with docker build
# =============================================================================

# -----------------------------------------------------------------------------
# CUDA and System Configuration
# -----------------------------------------------------------------------------
# CUDA version (must match available nvidia/cuda images)
CUDA_VERSION=12.1.0

# cuDNN version
CUDNN_VERSION=8

# Ubuntu version
UBUNTU_VERSION=22.04

# Python version (use major.minor format, e.g., 3.10)
PYTHON_VERSION=3.10

# -----------------------------------------------------------------------------
# Python Package Versions
# -----------------------------------------------------------------------------
# Poetry version for dependency management
POETRY_VERSION=1.8.3

# PyTorch version (should match your requirements)
TORCH_VERSION=2.4.0

# Kaolin version and source URL
KAOLIN_VERSION=0.17.0
KAOLIN_INDEX_URL=https://nvidia-kaolin.s3.us-east-2.amazonaws.com/torch-2.4.0_cu121.html

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------
# Application user (non-root user inside container)
APP_USER=appuser

# User ID for the app user (match your host user ID for volume permissions)
# Run `id -u` on Linux to get your user ID
APP_UID=1000

# Port inside the container (default Streamlit port)
APP_PORT=8501

# Port on the host machine (what you access in your browser)
HOST_PORT=8501

# -----------------------------------------------------------------------------
# GPU Configuration
# -----------------------------------------------------------------------------
# Which GPUs to use (all, or comma-separated device IDs like "0,1")
CUDA_VISIBLE_DEVICES=all

# Number of GPUs to allocate (all, or a specific number)
GPU_COUNT=all

# -----------------------------------------------------------------------------
# Cache Directory Configuration
# -----------------------------------------------------------------------------
# Cache directories inside the container
CACHE_DIR=/home/appuser/.cache
HF_CACHE_DIR=/home/appuser/.cache/huggingface
REMBG_CACHE_DIR=/home/appuser/.u2net
TRELLIS_OUTPUT_DIR=/tmp/Trellis-demo

# Docker volume names for persistent storage
CACHE_VOLUME=trellis-cache
HF_CACHE_VOLUME=huggingface-cache
REMBG_CACHE_VOLUME=rembg-cache

# Host directory for outputs (relative or absolute path)
OUTPUTS_HOST_DIR=./outputs

# -----------------------------------------------------------------------------
# Docker Image Configuration
# -----------------------------------------------------------------------------
# Docker image name
IMAGE_NAME=trellis-box

# Docker image tag
IMAGE_TAG=latest

# -----------------------------------------------------------------------------
# Example Configurations for Different Scenarios
# -----------------------------------------------------------------------------

# Example 1: Use a different CUDA version
# CUDA_VERSION=12.2.0

# Example 2: Change the application port
# APP_PORT=8080
# HOST_PORT=8080

# Example 3: Match host user ID (useful for file permissions)
# APP_UID=1001  # Replace with output of: id -u

# Example 4: Use only specific GPUs
# CUDA_VISIBLE_DEVICES=0,1
# GPU_COUNT=2

# Example 5: Use Python 3.11 (ensure compatibility with dependencies first)
# PYTHON_VERSION=3.11

# Example 6: Use custom cache directories
# CACHE_DIR=/data/.cache
# HF_CACHE_DIR=/data/.cache/huggingface
# REMBG_CACHE_DIR=/data/.u2net

# Example 7: Use custom volume names (useful for multiple instances)
# CACHE_VOLUME=trellis-dev-cache
# HF_CACHE_VOLUME=huggingface-dev-cache
# REMBG_CACHE_VOLUME=rembg-dev-cache

# Example 8: Store outputs in a different directory
# OUTPUTS_HOST_DIR=/path/to/my/outputs

